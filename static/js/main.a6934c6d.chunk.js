(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[2],{119:function(e,t,n){"use strict";n.r(t);var c=n(30),o=n(29),r=n(6),a=n(48),s=n(81),i=(n(71),n(0)),u=n.n(i),d=n(19),l=n(32),f=n(67),g=[{path:"/contacts",label:"Contacts Page",component:Object(i.lazy)((function(){return n.e(0).then(n.bind(null,158))})),exact:!0,isProtected:!0},{path:"/login",label:"Login Page",component:Object(i.lazy)((function(){return n.e(1).then(n.bind(null,156))})),isProtected:!1,isNotLoggedOn:!0},{path:"/register",label:"Register Page",component:Object(i.lazy)((function(){return n.e(3).then(n.bind(null,157))})),isProtected:!1,isNotLoggedOn:!0}],h=n(66),b=n(146),j=n(44),O=n(148),p=n(150),m=n(4),L=Object(h.a)({menu:{},link:{color:"green"},container:{display:"flex",justifyContent:"space-between"},button:{width:"150px",height:"25px"},active:{color:"rgb(59, 138, 255)"}}),x=function(){var e=L(),t=Object(d.b)(),n=Object(d.c)((function(e){return e.user.isLoggedOn})),c=u.a.useState(null),r=Object(f.a)(c,2),a=r[0],s=r[1],i=function(){s(null)};return Object(m.jsxs)("div",{className:e.container,children:[Object(m.jsx)(b.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},children:"Open Menu"}),Object(m.jsx)(O.a,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:i,className:e.menu,children:g.map((function(t){var c=t.path,r=t.exact,a=t.label,s=t.isProtected,u=t.isNotLoggedOn;return function(e,t,n){return(!e||e&&t)&&(!n||n&&!t)}(s,n,u)?Object(m.jsx)(p.a,{onClick:i,children:Object(m.jsx)(o.b,{activeClassName:e.active,exact:r,to:c,children:a},c)}):null}))}),Object(m.jsx)(b.a,{onClick:function(){return t(Object(j.c)())},className:e.button,variant:"contained",color:"primary",children:"Logout"})]})},v=n(10),k=function(e){return Object(d.c)((function(e){return e.user.isLoggedOn}))?Object(m.jsx)(v.b,Object(c.a)({},e)):Object(m.jsx)(v.a,{to:"/login"})},y=function(e){var t=Object(d.c)((function(e){return e.user.isLoggedOn})),n=e.isNotLoggedOn;return!n||n&&!t?Object(m.jsx)(v.b,Object(c.a)({},e)):null},C=function(){return Object(m.jsx)("div",{className:"content",children:Object(m.jsx)(i.Suspense,{fallback:Object(m.jsx)("p",{children:"Loading..."}),children:Object(m.jsx)(v.d,{children:g.map((function(e){var t=e.path,n=e.exact,c=e.isProtected,o=e.component,r=e.isNotLoggedOn;return c?Object(m.jsx)(k,{path:t,exact:n,component:o},t):Object(m.jsx)(y,{path:t,exact:n,component:o,isNotLoggedOn:r},t)}))})})})},E=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.user.isAuthorized}));return Object(i.useEffect)((function(){e(Object(j.a)())}),[e]),Object(m.jsx)("div",{children:t?Object(m.jsx)("p",{children:"isLoading..."}):Object(m.jsxs)("div",{className:"body",children:[Object(m.jsx)(x,{}),Object(m.jsx)(C,{}),Object(m.jsx)(l.a,{})]})})},R=n(83),S=n(43),N=n(38),w=n(23),q=n(14),z=n(65),A=n.n(z),U={isLoading:!1,error:"",contacts:{items:[{id:null,name:"",number:null}],filter:""}},P=Object(q.b)({items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U.contacts.items,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case"contacts/fetchContactsSuccess":return c;case"contacts/addContactSuccess":return[].concat(Object(S.a)(e),[c]);case"contacts/deleteContactSuccess":return Object(S.a)(e.filter((function(e){var t=e.id;return c!==t})));default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U.contacts.filter,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case"contacts/ChangeFilter":return n;default:return e}},isLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U.isLoading,t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(n){case"contacts/fetchContactsRequest":case"contacts/addContactRequest":case"contacts/deleteContactRequest":return!0;case"contacts/fetchContactsSuccess":case"contacts/fetchContactsError":case"contacts/addContactSuccess":case"contacts/addContactError":case"contacts/deleteContactSuccess":case"contacts/deleteContactError":return!1;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U.isLoading,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case"contacts/fetchContactsError":case"contacts/addContactError":case"contacts/deleteContactError":return c;default:return e}}}),B=n(15),T={key:"phoneBook",storage:A.a,whitelist:["token"]},M=Object(w.g)(T,P),J={key:"token",storage:A.a},F=Object(w.g)(J,B.a),I=Object(q.b)({phoneBook:M,user:F}),_=n(84),D=n.n(_),G=[].concat(Object(S.a)(Object(N.d)({serializableCheck:{ignoredActions:[w.a,w.f,w.b,w.c,w.d,w.e]}})),[D.a]),H=Object(N.a)({reducer:I,middleware:G,devTools:!1}),K=Object(w.h)(H),Q={position:a.b.BOTTOM_CENTER,timeout:5e3,offset:"30px",transition:a.c.SCALE},V=function(){return Object(m.jsx)(a.a,Object(c.a)(Object(c.a)({template:s.a},Q),{},{children:Object(m.jsx)(d.a,{store:H,children:Object(m.jsx)(R.a,{loading:null,persistor:K,children:Object(m.jsx)(o.a,{children:Object(m.jsx)(E,{})})})})}))};Object(r.render)(Object(m.jsx)(V,{}),document.getElementById("root"))},15:function(e,t,n){"use strict";n.d(t,"i",(function(){return s})),n.d(t,"j",(function(){return i})),n.d(t,"h",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return f})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return h})),n.d(t,"e",(function(){return b})),n.d(t,"m",(function(){return j})),n.d(t,"n",(function(){return O})),n.d(t,"l",(function(){return p})),n.d(t,"k",(function(){return m}));var c=n(38),o=Object(c.c)({name:"user",initialState:{email:"",name:"",token:"",isLoggedOn:!1,isLoading:!0,isAuthorized:!0,error:""},reducers:{fetchRegisterRequest:function(e){e.isLoading=!0},fetchRegisterSuccess:function(e,t){e.name=t.payload.user.name,e.email=t.payload.user.email,e.token=t.payload.token,e.isLoggedOn=!1,e.isLoading=!1},fetchRegisterError:function(e,t){e.error=t.payload.message,e.isLoading=!1},fetchLoginRequest:function(e){e.isLoading=!0},fetchLoginSuccess:function(e,t){e.name=t.payload.user.name,e.email=t.payload.user.email,e.token=t.payload.token,e.isLoggedOn=!1,e.isLoading=!1},fetchLoginError:function(e,t){e.error=t.payload.message,e.isLoading=!1},fetchLogoutRequest:function(e){e.isLoading=!0},fetchLogoutSuccess:function(e,t){e.token="",e.name="",e.email="",e.isLoggedOn=!1,e.isLoading=!1},fetchLogoutError:function(e,t){e.error=t.payload,e.isLoading=!1},fetchUserRequest:function(e){e.isAuthorized=!0},fetchUserSuccess:function(e,t){e.name=t.payload.name,e.email=t.payload.email,e.isLoggedOn=!0,e.isAuthorized=!1},fetchUserError:function(e){e.isAuthorized=!1,e.isLoggedOn=!1,e.token=""},fetchUserCancel:function(e){e.isAuthorized=!1}}}),r=o.actions,a=o.reducer,s=r.fetchRegisterRequest,i=r.fetchRegisterSuccess,u=r.fetchRegisterError,d=r.fetchLoginRequest,l=r.fetchLoginSuccess,f=r.fetchLoginError,g=r.fetchLogoutRequest,h=r.fetchLogoutSuccess,b=r.fetchLogoutError,j=r.fetchUserRequest,O=r.fetchUserSuccess,p=r.fetchUserError,m=r.fetchUserCancel;t.a=a},44:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return l}));var c=n(31),o=n.n(c),r=n(32),a=n(15);o.a.defaults.baseURL="https://connections-api.herokuapp.com/users";var s=function(e){o.a.defaults.headers.common.Authorization=e},i=function(e){return function(t,n){t(a.i()),o.a.post("/signup",e).then((function(e){var n=e.data;s(n.token),t(a.j(n))})).catch((function(e){r.b.error(e.message),t(a.h(e.message))}))}},u=function(e){return function(t,n){t(a.c()),o.a.post("/login",e).then((function(e){var n=e.data;s(n.token),t(a.d(n))})).catch((function(e){r.b.error(e.message),t(a.b(e.message))}))}},d=function(){return function(e,t){e(a.f()),o.a.post("/logout").then((function(){return e(a.g())})).catch((function(t){r.b.error(t.message),e(a.e(t.message))}))}},l=function(){return function(e,t){var n=t().user.token;n?(e(a.m()),s(n),o.a.get("/current").then((function(t){var n=t.data;return e(a.n(n))})).catch((function(t){r.b.error(t.message),s(""),e(a.l(t.message))}))):e(a.k())}}},71:function(e,t,n){}},[[119,4,5]]]);
//# sourceMappingURL=main.a6934c6d.chunk.js.map