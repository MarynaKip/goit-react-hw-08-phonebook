(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[2],{11:function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return i})),n.d(e,"b",(function(){return u})),n.d(e,"f",(function(){return d})),n.d(e,"g",(function(){return l})),n.d(e,"e",(function(){return f})),n.d(e,"j",(function(){return h})),n.d(e,"k",(function(){return g})),n.d(e,"i",(function(){return b})),n.d(e,"h",(function(){return j}));var c=n(21),o=Object(c.c)({name:"user",initialState:{email:"",name:"",token:"",isLoggedOn:!1,isLoading:!0,isAuthorized:!0,error:""},reducers:{fetchLoginRequest:function(t){t.isLoading=!0},fetchLoginSuccess:function(t,e){t.name=e.payload.user.name,t.email=e.payload.user.email,t.token=e.payload.token,t.isLoggedOn=!1,t.isLoading=!1},fetchLoginError:function(t,e){t.error=e.payload.message,t.isLoading=!1},fetchLogoutRequest:function(t){t.isLoading=!0},fetchLogoutSuccess:function(t,e){t.token="",t.name="",t.email="",t.isLoggedOn=!1,t.isLoading=!1},fetchLogoutError:function(t,e){t.error=e.payload,t.isLoading=!1},fetchUserRequest:function(t){t.isAuthorized=!0},fetchUserSuccess:function(t,e){t.name=e.payload.name,t.email=e.payload.email,t.isLoggedOn=!0,t.isAuthorized=!1},fetchUserError:function(t){t.isAuthorized=!1,t.isLoggedOn=!1,t.token=""},fetchUserCancel:function(t){t.isAuthorized=!1}}}),r=o.actions,a=o.reducer,s=r.fetchLoginRequest,i=r.fetchLoginSuccess,u=r.fetchLoginError,d=r.fetchLogoutRequest,l=r.fetchLogoutSuccess,f=r.fetchLogoutError,h=r.fetchUserRequest,g=r.fetchUserSuccess,b=r.fetchUserError,j=r.fetchUserCancel;e.a=a},26:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return d}));var c=n(19),o=n.n(c),r=n(20),a=n(11);o.a.defaults.baseURL="https://connections-api.herokuapp.com/users";var s=function(t){o.a.defaults.headers.common.Authorization=t},i=function(t){return function(e,n){e(a.c()),o.a.post("/login",t).then((function(t){var n=t.data;s(n.token),e(a.d(n))})).catch((function(t){r.b.error(t.message),e(a.b(t.message))}))}},u=function(){return function(t,e){t(a.f()),o.a.post("/logout").then((function(){return t(a.g())})).catch((function(e){r.b.error(e.message),t(a.e(e.message))}))}},d=function(){return function(t,e){var n=e().user.token;n?(t(a.j()),s(n),o.a.get("/current").then((function(e){var n=e.data;return t(a.k(n))})).catch((function(e){r.b.error(e.message),s(""),t(a.i(e.message))}))):t(a.h())}}},38:function(t,e,n){},82:function(t,e,n){"use strict";n.r(e);var c=n(18),o=n(17),r=n(13),a=n(28),s=n(47),i=(n(38),n(0)),u=n(12),d=n(20),l=[{path:"/contacts",label:"Contacts Page",component:Object(i.lazy)((function(){return n.e(0).then(n.bind(null,90))})),exact:!0,isProtected:!0},{path:"/login",label:"Login Page",component:Object(i.lazy)((function(){return n.e(1).then(n.bind(null,88))})),isProtected:!1,isNotLoggedOn:!0},{path:"/register",label:"Register Page",component:Object(i.lazy)((function(){return n.e(3).then(n.bind(null,89))})),isProtected:!1,isNotLoggedOn:!0}],f=n(35),h=n(26),g=n(2),b=Object(f.a)({menu:{display:"flex",flexDirection:"column",justifyContent:"flex-start"},link:{color:"green"},container:{display:"flex",justifyContent:"space-between"},button:{width:"150px",height:"25px"}}),j=function(){var t=b(),e=Object(u.b)(),n=Object(u.c)((function(t){return t.user.isLoggedOn}));return Object(g.jsxs)("div",{className:t.container,children:[Object(g.jsxs)("div",{className:t.menu,children:[Object(g.jsx)("p",{children:"User Menu"}),l.map((function(t){var e=t.path,c=t.exact,r=t.label,a=t.isProtected,s=t.isNotLoggedOn;return function(t,e,n){return(!t||t&&e)&&(!n||n&&!e)}(a,n,s)?Object(g.jsx)(o.b,{exact:c,to:e,children:r},e):null}))]}),Object(g.jsx)("button",{className:t.button,onClick:function(){return e(Object(h.c)())},children:"Logout"})]})},O=n(6),p=function(t){return Object(u.c)((function(t){return t.user.isLoggedOn}))?Object(g.jsx)(O.b,Object(c.a)({},t)):Object(g.jsx)(O.a,{to:"/login"})},m=function(t){var e=Object(u.c)((function(t){return t.user.isLoggedOn})),n=t.isNotLoggedOn;return!n||n&&!e?Object(g.jsx)(O.b,Object(c.a)({},t)):null},L=function(){return Object(g.jsx)("div",{className:"content",children:Object(g.jsx)(i.Suspense,{fallback:Object(g.jsx)("p",{children:"Loading..."}),children:Object(g.jsx)(O.d,{children:l.map((function(t){var e=t.path,n=t.exact,c=t.isProtected,o=t.component,r=t.isNotLoggedOn;return c?Object(g.jsx)(p,{path:e,exact:n,component:o},e):Object(g.jsx)(m,{path:e,exact:n,component:o,isNotLoggedOn:r},e)}))})})})},x=function(){var t=Object(u.b)(),e=Object(u.c)((function(t){return t.user.isAuthorized}));return Object(i.useEffect)((function(){t(Object(h.a)())}),[t]),Object(g.jsx)("div",{children:e?Object(g.jsx)("p",{children:"isLoading..."}):Object(g.jsxs)("div",{className:"body",children:[Object(g.jsx)(j,{}),Object(g.jsx)(L,{}),Object(g.jsx)(d.a,{})]})})},v=n(49),y=n(24),C=n(21),k=n(15),E=n(7),S=n(34),w=n.n(S),N={isLoading:!1,error:"",contacts:{items:[{id:null,name:"",number:null}],filter:""}},R=Object(E.b)({items:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N.contacts.items,e=arguments.length>1?arguments[1]:void 0,n=e.type,c=e.payload;switch(n){case"contacts/fetchContactsSuccess":return c;case"contacts/addContactSuccess":return[].concat(Object(y.a)(t),[c]);case"contacts/deleteContactSuccess":return Object(y.a)(t.filter((function(t){var e=t.id;return c!==e})));default:return t}},filter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N.contacts.filter,e=arguments.length>1?arguments[1]:void 0,n=e.payload;switch(e.type){case"contacts/ChangeFilter":return n;default:return t}},isLoading:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N.isLoading,e=arguments.length>1?arguments[1]:void 0,n=e.type;switch(n){case"contacts/fetchContactsRequest":case"contacts/addContactRequest":case"contacts/deleteContactRequest":return!0;case"contacts/fetchContactsSuccess":case"contacts/fetchContactsError":case"contacts/addContactSuccess":case"contacts/addContactError":case"contacts/deleteContactSuccess":case"contacts/deleteContactError":return!1;default:return t}},error:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N.isLoading,e=arguments.length>1?arguments[1]:void 0,n=e.type,c=e.payload;switch(n){case"contacts/fetchContactsError":case"contacts/addContactError":case"contacts/deleteContactError":return c;default:return t}}}),z=n(11),U={key:"phoneBook",storage:w.a,whitelist:["token"]},q=Object(k.g)(U,R),A={key:"token",storage:w.a},P=Object(k.g)(A,z.a),B=Object(E.b)({phoneBook:q,user:P}),T=n(50),J=n.n(T),M=[].concat(Object(y.a)(Object(C.d)({serializableCheck:{ignoredActions:[k.a,k.f,k.b,k.c,k.d,k.e]}})),[J.a]),D=Object(C.a)({reducer:B,middleware:M,devTools:!1}),F=Object(k.h)(D),I={position:a.b.BOTTOM_CENTER,timeout:5e3,offset:"30px",transition:a.c.SCALE},_=function(){return Object(g.jsx)(a.a,Object(c.a)(Object(c.a)({template:s.a},I),{},{children:Object(g.jsx)(u.a,{store:D,children:Object(g.jsx)(v.a,{loading:null,persistor:F,children:Object(g.jsx)(o.a,{children:Object(g.jsx)(x,{})})})})}))};Object(r.render)(Object(g.jsx)(_,{}),document.getElementById("root"))}},[[82,4,5]]]);
//# sourceMappingURL=main.f2d20306.chunk.js.map