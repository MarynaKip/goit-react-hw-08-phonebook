(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[2],{100:function(e,t,n){"use strict";n.r(t);var c=n(22),o=n(21),r=n(10),a=n(42),s=n(63),i=(n(54),n(0)),u=n(15),d=n(25),f=[{path:"/contacts",label:"Contacts Page",component:Object(i.lazy)((function(){return n.e(0).then(n.bind(null,121))})),exact:!0,isProtected:!0},{path:"/login",label:"Login Page",component:Object(i.lazy)((function(){return n.e(1).then(n.bind(null,119))})),isProtected:!1,isNotLoggedOn:!0},{path:"/register",label:"Register Page",component:Object(i.lazy)((function(){return n.e(3).then(n.bind(null,120))})),isProtected:!1,isNotLoggedOn:!0}],l=n(51),g=n(114),h=n(33),b=n(3),j=Object(l.a)({menu:{display:"flex",flexDirection:"column",justifyContent:"flex-start"},link:{color:"green"},container:{display:"flex",justifyContent:"space-between"},button:{width:"150px",height:"25px"},active:{color:"rgb(59, 138, 255)"}}),O=function(){var e=j(),t=Object(u.b)(),n=Object(u.c)((function(e){return e.user.isLoggedOn}));return Object(b.jsxs)("div",{className:e.container,children:[Object(b.jsxs)("div",{className:e.menu,children:[Object(b.jsx)("p",{children:"User Menu"}),f.map((function(t){var c=t.path,r=t.exact,a=t.label,s=t.isProtected,i=t.isNotLoggedOn;return function(e,t,n){return(!e||e&&t)&&(!n||n&&!t)}(s,n,i)?Object(b.jsx)(o.b,{activeClassName:e.active,exact:r,to:c,children:a},c):null}))]}),Object(b.jsx)(g.a,{onClick:function(){return t(Object(h.c)())},className:e.button,variant:"contained",color:"primary",children:"Logout"})]})},p=n(7),m=function(e){return Object(u.c)((function(e){return e.user.isLoggedOn}))?Object(b.jsx)(p.b,Object(c.a)({},e)):Object(b.jsx)(p.a,{to:"/login"})},L=function(e){var t=Object(u.c)((function(e){return e.user.isLoggedOn})),n=e.isNotLoggedOn;return!n||n&&!t?Object(b.jsx)(p.b,Object(c.a)({},e)):null},x=function(){return Object(b.jsx)("div",{className:"content",children:Object(b.jsx)(i.Suspense,{fallback:Object(b.jsx)("p",{children:"Loading..."}),children:Object(b.jsx)(p.d,{children:f.map((function(e){var t=e.path,n=e.exact,c=e.isProtected,o=e.component,r=e.isNotLoggedOn;return c?Object(b.jsx)(m,{path:t,exact:n,component:o},t):Object(b.jsx)(L,{path:t,exact:n,component:o,isNotLoggedOn:r},t)}))})})})},v=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.user.isAuthorized}));return Object(i.useEffect)((function(){e(Object(h.a)())}),[e]),Object(b.jsx)("div",{children:t?Object(b.jsx)("p",{children:"isLoading..."}):Object(b.jsxs)("div",{className:"body",children:[Object(b.jsx)(O,{}),Object(b.jsx)(x,{}),Object(b.jsx)(d.a,{})]})})},y=n(65),k=n(32),C=n(28),R=n(19),E=n(9),S=n(50),N=n.n(S),w={isLoading:!1,error:"",contacts:{items:[{id:null,name:"",number:null}],filter:""}},q=Object(E.b)({items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w.contacts.items,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case"contacts/fetchContactsSuccess":return c;case"contacts/addContactSuccess":return[].concat(Object(k.a)(e),[c]);case"contacts/deleteContactSuccess":return Object(k.a)(e.filter((function(e){var t=e.id;return c!==t})));default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w.contacts.filter,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case"contacts/ChangeFilter":return n;default:return e}},isLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w.isLoading,t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(n){case"contacts/fetchContactsRequest":case"contacts/addContactRequest":case"contacts/deleteContactRequest":return!0;case"contacts/fetchContactsSuccess":case"contacts/fetchContactsError":case"contacts/addContactSuccess":case"contacts/addContactError":case"contacts/deleteContactSuccess":case"contacts/deleteContactError":return!1;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w.isLoading,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case"contacts/fetchContactsError":case"contacts/addContactError":case"contacts/deleteContactError":return c;default:return e}}}),z=n(11),U={key:"phoneBook",storage:N.a,whitelist:["token"]},A=Object(R.g)(U,q),P={key:"token",storage:N.a},B=Object(R.g)(P,z.a),T=Object(E.b)({phoneBook:A,user:B}),J=n(66),M=n.n(J),D=[].concat(Object(k.a)(Object(C.d)({serializableCheck:{ignoredActions:[R.a,R.f,R.b,R.c,R.d,R.e]}})),[M.a]),F=Object(C.a)({reducer:T,middleware:D,devTools:!1}),I=Object(R.h)(F),_={position:a.b.BOTTOM_CENTER,timeout:5e3,offset:"30px",transition:a.c.SCALE},G=function(){return Object(b.jsx)(a.a,Object(c.a)(Object(c.a)({template:s.a},_),{},{children:Object(b.jsx)(u.a,{store:F,children:Object(b.jsx)(y.a,{loading:null,persistor:I,children:Object(b.jsx)(o.a,{children:Object(b.jsx)(v,{})})})})}))};Object(r.render)(Object(b.jsx)(G,{}),document.getElementById("root"))},11:function(e,t,n){"use strict";n.d(t,"i",(function(){return s})),n.d(t,"j",(function(){return i})),n.d(t,"h",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return h})),n.d(t,"e",(function(){return b})),n.d(t,"m",(function(){return j})),n.d(t,"n",(function(){return O})),n.d(t,"l",(function(){return p})),n.d(t,"k",(function(){return m}));var c=n(28),o=Object(c.c)({name:"user",initialState:{email:"",name:"",token:"",isLoggedOn:!1,isLoading:!0,isAuthorized:!0,error:""},reducers:{fetchRegisterRequest:function(e){e.isLoading=!0},fetchRegisterSuccess:function(e,t){e.name=t.payload.user.name,e.email=t.payload.user.email,e.token=t.payload.token,e.isLoggedOn=!1,e.isLoading=!1},fetchRegisterError:function(e,t){e.error=t.payload.message,e.isLoading=!1},fetchLoginRequest:function(e){e.isLoading=!0},fetchLoginSuccess:function(e,t){e.name=t.payload.user.name,e.email=t.payload.user.email,e.token=t.payload.token,e.isLoggedOn=!1,e.isLoading=!1},fetchLoginError:function(e,t){e.error=t.payload.message,e.isLoading=!1},fetchLogoutRequest:function(e){e.isLoading=!0},fetchLogoutSuccess:function(e,t){e.token="",e.name="",e.email="",e.isLoggedOn=!1,e.isLoading=!1},fetchLogoutError:function(e,t){e.error=t.payload,e.isLoading=!1},fetchUserRequest:function(e){e.isAuthorized=!0},fetchUserSuccess:function(e,t){e.name=t.payload.name,e.email=t.payload.email,e.isLoggedOn=!0,e.isAuthorized=!1},fetchUserError:function(e){e.isAuthorized=!1,e.isLoggedOn=!1,e.token=""},fetchUserCancel:function(e){e.isAuthorized=!1}}}),r=o.actions,a=o.reducer,s=r.fetchRegisterRequest,i=r.fetchRegisterSuccess,u=r.fetchRegisterError,d=r.fetchLoginRequest,f=r.fetchLoginSuccess,l=r.fetchLoginError,g=r.fetchLogoutRequest,h=r.fetchLogoutSuccess,b=r.fetchLogoutError,j=r.fetchUserRequest,O=r.fetchUserSuccess,p=r.fetchUserError,m=r.fetchUserCancel;t.a=a},33:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return f}));var c=n(24),o=n.n(c),r=n(25),a=n(11);o.a.defaults.baseURL="https://connections-api.herokuapp.com/users";var s=function(e){o.a.defaults.headers.common.Authorization=e},i=function(e){return function(t,n){t(a.i()),o.a.post("/signup",e).then((function(e){var n=e.data;s(n.token),t(a.j(n))})).catch((function(e){r.b.error(e.message),t(a.h(e.message))}))}},u=function(e){return function(t,n){t(a.c()),o.a.post("/login",e).then((function(e){var n=e.data;s(n.token),t(a.d(n))})).catch((function(e){r.b.error(e.message),t(a.b(e.message))}))}},d=function(){return function(e,t){e(a.f()),o.a.post("/logout").then((function(){return e(a.g())})).catch((function(t){r.b.error(t.message),e(a.e(t.message))}))}},f=function(){return function(e,t){var n=t().user.token;n?(e(a.m()),s(n),o.a.get("/current").then((function(t){var n=t.data;return e(a.n(n))})).catch((function(t){r.b.error(t.message),s(""),e(a.l(t.message))}))):e(a.k())}}},54:function(e,t,n){}},[[100,4,5]]]);
//# sourceMappingURL=main.24d05fc7.chunk.js.map